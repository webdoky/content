# WebDoky - контент

[![uk](https://img.shields.io/badge/lang-uk-green.svg)](https://github.com/webdoky/content/blob/master/README.md)
[![en](https://img.shields.io/badge/lang-en-yellow.svg)](https://github.com/webdoky/content/blob/master/README.en.md)

## Що це

Тут знаходиться вміст вебдокументації з [WebDoky](https://webdoky.org/). Фактично це статті з [MDN](https://github.com/mdn/content), перекладені українською (див. [ліцензію на вміст цього репозиторію](https://github.com/webdoky/content/blob/master/LICENSE.md))

## LanguageTool перевірка

У репозиторій вбудована перевірка тексту в репозиторії за допомогою LanguageTool CLI. Це працює при створенні PR.

### Винятки

Щоб додати слово незнайоме LanguageTool, але котре LanguageTool мусить використовувати для створення пропозицій виправлень - додайте його окремим рядком у файл `uk_spelling_additions.txt`.

Щоб додати слово незнайоме LanguageTool, котре слід просто ігнорувати - додайте його окремим рядком у файл `uk_ignore_additions.txt` (у більшості випадків слід віддавати перевагу `uk_spelling_additions.txt`).

Щоб заборонити слово, котре LanguageTool обробляє як нормативне - додайте його окремим рядком у файл `uk_prohibited_additions.txt`.

Внесені зміни спрацюють при наступній перевірці після оновлення PR.

### Вимкнення правила

Щоб вимкнути певне правило LanguageTool - додайте його окремим рядком у файл `disabled_rules.txt`.

Внесені зміни спрацюють при наступній перевірці після оновлення PR.

## Допоміжні сценарії

### fu – finishupdate

1. Знаходить нові зміни в `index.md` файлах (або нові `index.md` файли). Якщо змінено не 1 файл, а більше або нуль – зупиняється з помилкою.
2. З'ясовує тип змін: оновлення або новий переклад.
3. Формує на основі шляху до зміненого Markdown файлу назву гілки.
4. Перевіряє, чи не існує цільова гілка на віддаленому репозиторії. Якщо існує – зупиняється з помилкою. (**Злиті гілки повинні бути видалені вручну на GitHub.**)
5. Видаляє стару локальну гілку з такою ж назвою, якщо вона існує.
6. Переходить в гілку `master`.
7. Стягує оновлення в `master`.
8. Створює цільову гілку заново та переходить в неї.
9. Додає директорію з перекладом (де лежить `index.md` файл) до майбутнього коміту.
10. Додає до майбутнього коміту файли з припасуваннями LanguageTool (`./*_additions.txt`).
11. Створює коміт з автоматично створеним повідомленням.
12. Надсилає оновлення в гілці на GitHub.

Тобто, якщо стисло, цей сценарій створює гілку на основі шляху до файлу та надсилає її на GitHub. PR повинен бути створений вручну.

Викликається в один з наступних способів:

```sh
yarn finishupdate
yarn fu
```

### fux – finishupdate --fix

Щоб цей сценарій працював, потрібно самотужки перейти в гілку, яку необхідно оновити.

1. Знаходить нові зміни в `index.md` файлах (або нові `index.md` файли). Якщо змінено не 1 файл, а більше або нуль – зупиняється з помилкою.
2. З'ясовує тип змін: оновлення або новий переклад.
3. Формує на основі шляху до змінено Markdown файлу назву гілки. (Ця назва повинна в подальшому збігатися з поточною гілкою, щонайменше в частині після `/`).
4. Переходить в гілку `master`.
5. Стягує оновлення в `master`.
6. Переходить до цільової гілки.
7. Додає директорію з перекладом (де лежить `index.md` файл) до майбутнього коміту.
8. Додає до майбутнього коміту файли з припасуваннями LanguageTool (`./*_additions.txt`).
9. Створює коміт з автоматично створеним повідомленням.
10. Надсилає оновлення в гілці на GitHub.

Тобто, якщо стисло, цей сценарій додає до наявного перекладу чи оновлення новий коміт із виправленнями, а також надсилає його.

Викликається в один з наступних способів (наприклад, коли потрібна гілка `chore/update-deps`):

```sh
yarn finishupdate --update
yarn fu --update
yarn fux
```
