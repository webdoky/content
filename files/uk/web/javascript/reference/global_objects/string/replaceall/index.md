---
title: String.prototype.replaceAll()
slug: Web/JavaScript/Reference/Global_Objects/String/replaceAll
tags:
  - JavaScript
  - Method
  - Prototype
  - Reference
  - String
  - regex
  - Polyfill
browser-compat: javascript.builtins.String.replaceAll
---
{{JSRef}}

Метод **`replaceAll()`** повертає новий рядок, в якому всі збіги з патерном `pattern` замінені переданим значенням `replacement`. Значенням `pattern` може бути як рядок, так і {{jsxref("RegExp")}}, а `replacement` може бути рядком або функцією, яка буде викликана для кожного знайденого збігу.

Початковий рядок залишається незмінним.

{{EmbedInteractiveExample("pages/js/string-replaceall.html")}}

## Синтаксис

```js
replaceAll(regexp, newSubstr)
replaceAll(regexp, replacerFunction)

replaceAll(substr, newSubstr)
replaceAll(substr, replacerFunction)
```

> **Примітка:** Під час застосування із \`_regexp_\` необхідно встановлювати прапорець глобального пошуку ("g"). Інакше
> функція викине `TypeError`: "replaceAll must be called with a global RegExp".

### Параметри

- `regexp` (pattern)
  - : Об'єкт {{jsxref("RegExp", "регулярного виразу")}} або його літеральна форма з прапорцем глобального пошуку. Збіги замінюються вмістом параметру `newSubstr` або значенням, поверненим зі вказаної `replacerFunction`. Регулярний вираз без глобального прапорця ("g") викине `TypeError`: "replaceAll must be called with a global RegExp".
- `substr`
  - : {{jsxref("String", "Рядок")}}, який буде замінений вмістом `newSubstr`. Його значення сприймається як рядок і _не_ інтерпретується як регулярний вираз.
- `newSubstr` (заміна)
  - : {{jsxref("String", "Рядок")}}, який замінює всі підрядки, вказані через параметр `regexp` чи `substr`. Доступний цілий набір патернів спеціальної заміни; докладніше про це в секції "[Передача рядка як аргументу](#peredacha-riadka-yak-arhumentu)"
    нижче.
- `replacerFunction` (заміна)
  - : Функція, що буде викликана для створення нового підрядка для заміни збігів із переданим `regexp` чи `substr`.
    Аргументи, що передаються цій функціх, описані в секції
    "[Передача функції як аргументу](#peredacha-funktsii-yak-arhumentu)" нижче.

### Повернене значення

Новий рядок, в якому всі збіги з патерном замінені вказаним значенням.

## Опис

Цей метод не змінює об'єкт {{jsxref("String")}}, на якому викликається. Натомість він повертає новий рядок.

### Передача рядка як аргументу

Рядок для заміни може містити наступні спеціальні патерни заміни:

| Патерн   | Що вставляє                                                                                                                                                                                                                                                                                                                       |
| --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `$$`      | Вставляє `"$"`.                                                                                                                                                                                                                                                                                                              |
| `$&`      | Вставляє підрядок, який збігся з патерном.                                                                                                                                                                                                                                                                                                |
| `` $` ``  | Вставляє частину рядка, яка передує знайденому збігу.                                                                                                                                                                                                                                                        |
| `$'`      | Вставляє частину рядка, яка знаходиться після знайденого збігу.                                                                                                                                                                                                                                                         |
| `$n`      | Де `n` — додатне ціле число, менше за 100. Вставляє збіг з відповідною групою в дужках, за умови, якщо першим аргументом було передано об'єкт {{jsxref("RegExp", "регулярного виразу")}}. Важлива деталь: нумерація цих груп починається з `1`.                     |

### Передача функції як аргументу

Другим аргументом можна також передати функцію. В цьому випадку функція викликається одразу, щойно збіг знайдено. Результат виконання функції (повернене значення) буде використано як рядок заміни. (**Зауваження:** Згадані вище спеціальні патерни для заміни в цьому випадку _не_ застосовуються.)

Слід зауважити, що якщо першим аргументом `replaceAll()` передано об'єкт {{jsxref("RegExp", "регулярного виразу")}} або його літеральну форму, то цю функцію буде викликано декілька разів.

Аргументи функції такі:

| Можливе ім'я | Передане значення                                                                                                                                                                                                                                                                                                         |
| ------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `match`       | Частина рядка, що збігається з патерном. (Відповідає комбінації `$&` вище).                                                                                                                                                                                                                                                                    |
| `p1, p2, ...` | Рядок, знайдений групою захоплення номер *n* (включно з іменованими групами захоплення), за умови, що першим аргументом у `replace()` передано {{jsxref("RegExp", "регулярний вираз")}}. (Відповідає комбінаціям `$1`, `$2`, і т.д. вище.) Наприклад, якщо було передано регулярний вираз `/(\a+)(\b+)/`, `p1` — це збіг для групи `\a+`, а `p2` — для `\b+`. |
| `offset`      | Зміщення всередині всього початкового рядка, за яким знаходиться частина рядка зі знайденим збігом. (Наприклад, якщо весь рядок був `'abcd'`, а знайдений збіг — `'bc'`, то цей аргумент дорівнюватиме `1`.)                                                                                                                     |
| `string`      | Цілий рядок, в якому проводився пошук збігів.                                                                                                                                                                                                                                                                                       |
| `namedGroups`      | Об'єкт з усіма іменованими групами захоплення. Його ключі відповідають іменам груп, а значення - відповідним знайденим збігам. Якщо регулярний вираз не містить ніяких груп захоплення, `namedGroups` дорівнює `undefined`          |

(Точна кількість аргументів залежить від того, чи першим аргументом був переданий {{jsxref("RegExp", "регулярний вираз")}}, і кількості вказаних груп в дужках у ньому, якщо так.)

## Приклади

### Застосування методу replaceAll

```js
'aabbcc'.replaceAll('b', '.');
// 'aa..cc'
```

### Регулярний вираз без глобального пошуку викидає виняток

Якщо шукане значення вказано як регулярний вираз, то такий вираз повинен бути глобальним. Наступний підхід не спрацює:

```js example-bad
'aabbcc'.replaceAll(/b/, '.');
TypeError: replaceAll must be called with a global RegExp
```

Проте такий варіант працюватиме:

```js example-good
'aabbcc'.replaceAll(/b/g, '.');
"aa..cc"
```

## Специфікації

{{Specifications}}

## Сумісність з браузерами

{{Compat}}

## Дивіться також

- Поліфіл методу `String.prototype.replaceAll` доступний у [`core-js`](https://github.com/zloirock/core-js#ecmascript-string-and-regexp)
- {{jsxref("String.prototype.replace", "String.prototype.replace()")}}
- {{jsxref("String.prototype.match", "String.prototype.match()")}}
- {{jsxref("RegExp.prototype.exec", "RegExp.prototype.exec()")}}
- {{jsxref("RegExp.prototype.test", "RegExp.prototype.test()")}}
