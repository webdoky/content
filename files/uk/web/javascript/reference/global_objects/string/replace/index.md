---
title: String.prototype.replace()
slug: Web/JavaScript/Reference/Global_Objects/String/replace
tags:
  - Expressions
  - JavaScript
  - Method
  - Prototype
  - Reference
  - Regular
  - String
browser-compat: javascript.builtins.String.replace
---
{{JSRef}}

Метод **`replace()`** повертає новий рядок, в якому деякі або всі збіги з переданим патерном заміщені переданою заміною. Патерн може бути рядком або {{jsxref("RegExp", "регулярним виразом")}}. А заміна може бути як рядком, так і функцією, яка буде викликана для кожного збігу. Якщо патерн — рядок, то заміняється лише перший збіг.

Початковий рядок залишається незмінним.

{{EmbedInteractiveExample("pages/js/string-replace.html")}}

## Синтаксис

```js
replace(regexp, newSubstr)
replace(regexp, replacerFunction)

replace(substr, newSubstr)
replace(substr, replacerFunction)
```

### Параметри

- `regexp` (патерн)
  - : {{jsxref("RegExp", "Регулярний вираз")}}, переданий як об'єкт чи літерал. Збіг або збіги замінюються рядком `newSubstr`, або ж значенням, поверненим вказаною функцією `replacerFunction`.
- `substr`
  - : {{jsxref("String", "Рядок")}}, який буде замінений переданим `newSubstr`. Він сприймається як рядковий літерал і _не_ інтерпретується як регулярний вираз. Замінюється лише перший збіг зі шуканим рядком.
- `newSubstr` (заміна)

  - : {{jsxref("String", "Рядок")}}, яким заміняється шуканий підрядок, вказаний в переданому параметрі `regexp` чи `substr`. Підтримується набір спеціальних патернів для заміни — дивіться розділ "[Передача рядка як аргументу](#specifying_a_string_as_a_parameter)" нижче.

    Якщо `newSubstr` — порожній рядок, то замість заміни рядки `substr` чи збіги з `regexp` будуть видалені.

- `replacerFunction` (заміна)
  - : Функція, яка викликається для створення нового рядка, який і буде вжито для заміни збігів з переданим `regexp` чи `substr`. В розділі "[Передача функції як аргументу](#specifying_a_function_as_a_parameter)" нижче описано аргументи, які передаються в цю функцію.

### Повернене значення

Новий рядок, в якому деякі (або всі) збіги з патерном заміщені переданим замінником.

## Опис

Цей метод не змінює об'єкт {{jsxref("String", "рядка")}}, на якому викликається. Натомість він повертає новий рядок.

Щоб виконати глобальний пошук і заміну, слід додати прапорець `g` в регулярний вираз.

### Передача рядка як аргументу

Рядок для заміни може містити наступні спеціальні патерни заміни:

| Патерн   | Що вставляє                                                                                                                                                                                                                                                                                                                       |
| --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `$$`      | Вставляє `"$"`.                                                                                                                                                                                                                                                                                                              |
| `$&`      | Вставляє підрядок, який збігся з патерном.                                                                                                                                                                                                                                                                                                |
| `` $` ``  | Вставляє частину рядка, яка передує знайденому збігу.                                                                                                                                                                                                                                                        |
| `$'`      | Вставляє частину рядка, яка знаходиться після знайденого збігу.                                                                                                                                                                                                                                                         |
| `$n`      | Де `n` — додатне ціле число, менше за 100. Вставляє збіг з відповідною групою в дужках, за умови, якщо першим аргументом було передано об'єкт {{jsxref("RegExp", "регулярного виразу")}}. Важлива деталь: нумерація цих груп починається з `1`. Якщо вказана група під номером `n` відсутня (скажімо, якщо номер групи — 3), то вона буде інтерпретована буквально (в цьому випадку як рядок `$3`).                     |
| `$<Name>` | Де `Name` — це назва захопленої групи. Якщо групи немає в знайденому збігу, чи в самому регулярному виразі, або першим аргументом замість регулярного виразу взагалі було передано рядок, то цей вираз вставляється буквально (наприклад, `$<Name>`). Працює лише в браузерах, які підтримують іменовані групи з захопленням в регулярних виразах. |

### Передача функції як аргументу

Другим аргументом можна також передати функцію. В цьому випадку функція викликається одразу, щойно збіг знайдено. Результат виконання функції (повернене значення) буде використано як рядок заміни. (**Зауваження:** Згадані вище спеціальні патерни для заміни в цьому випадку _не_ застосовуються.)

Зауважте, що ця функція буде викликана декілька разів, для кожного збігу, якщо регулярний вираз в першому аргументі позначено як глобальний.

Аргументи функції такі:

| Можливе ім'я | Передане значення                                                                                                                                                                                                                                                                                                         |
| ------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `match`       | Частина рядка, що збігається з патерном. (Відповідає комбінації `$&` вище).                                                                                                                                                                                                                                                                    |
| `p1, p2, ...` | Рядок, знайдений групою захоплення номер *n* (включно з іменованими групами захоплення), за умови, що першим аргументом у `replace()` передано {{jsxref("RegExp", "регулярний вираз")}}. (Відповідає комбінаціям `$1`, `$2`, і т.д. вище.) Наприклад, якщо було передано регулярний вираз `/(\a+)(\b+)/`, `p1` — це збіг для групи `\a+`, а `p2` — для `\b+`. |
| `offset`      | Зміщення всередині початкового рядка, за яким знаходиться частина рядка зі знайденим збігом. (Наприклад, якщо весь рядок був `'abcd'`, а знайдений збіг — `'bc'`, то цей аргумент дорівнюватиме `1`.)                                                                                                                     |
| `string`      | Цілий рядок, в якому проводився пошук збігів.                                                                                                                                                                                                                                                                                       |
| `groups`      | В браузерах із підтримкою іменованих груп захоплення тут буде знаходитися об'єкт, ключі якого відповідають іменам груп, а значення - відповідним знайденим збігам (`undefined`, якщо збігу не було).                                                                                                                                  |

(Точна кількість аргументів залежить від того, чи першим аргументом був переданий {{jsxref("RegExp", "регулярний вираз")}}, і кількості вказаних груп в дужках в ньому, якщо так.)

Наступний приклад встановить рядок `'abc - 12345 - #$*%'` значенням змінної `newString`:

```js
function replacer(match, p1, p2, p3, offset, string) {
  // p1 містить нецифрові символи, p2 — цифри, а p3 — все, окрім літер
  return [p1, p2, p3].join(' - ');
}
let newString = 'abc12345#$*%'.replace(/([^\d]*)(\d*)([^\w]*)/, replacer);
console.log(newString);  // abc - 12345 - #$*%
```

## Приклади

### Оголошення регулярного виразу безпосередньо в replace()

В наступному прикладі регулярний вираз оголошується всередині `replace()` і містить прапорець ігнорування регістру літер.

```js
let str = 'То була ніч перед Йолем...';
let newstr = str.replace(/йолем/i, 'Різдвом');
console.log(newstr);  // То була ніч перед Різдвом...
```

Це надрукує: `'То була ніч перед Різдвом...'`.

> **Примітка:** Зверніться до [цих настанов](/uk/docs/Web/JavaScript/Guide/Regular_Expressions) за повнішими
> роз'ясненнями щодо регулярних виразів.

### Застосування прапорців "глобальна заміна" та "знехтувати регістром" з replace()

Глобальна заміна може виконуватись лише із застосуванням регулярного виразу. В наступному прикладі регулярний вираз містить [прапорці "глобальний пошук" та "знехтувати регістром"](/uk/docs/Web/JavaScript/Guide/Regular_Expressions#advanced_searching_with_flags_2), що дає функції `replace()` змогу замінити всі входження `'яблука'` на рядок з `'апельсини'`.

```js
let re = /яблука/gi;
let str = 'Яблука — круглі, яблука — такі соковиті...';
let newstr = str.replace(re, 'апельсини');
console.log(newstr);  // апельсини — круглі, апельсини — такі соковиті...
```

Це надрукує: `'апельсини — круглі, апельсини — такі соковиті...'`.

### Заміна слів місцями в рядку

Наступний скрипт міняє слова місцями в рядку. Для отримання тексту заміни скрипт використовує [групи захоплення](/uk/docs/Web/JavaScript/Guide/Regular_Expressions/Groups_and_Ranges) і патерни заміни `$1` та `$2`.

```js
let re = /(\w+)\s(\w+)/;
let str = 'Іван Сірко';
let newstr = str.replace(re, '$2, $1');
console.log(newstr);  // Сірко, Іван
```

Це надрукує: `'Сірко, Іван'`.

### Застосування функції, оголошеної на місці, яка змінює літери збігу

В цьому прикладі всі наявні в рядку великі літери перетворюються в літери нижнього регістру, а перед місцем збігу вставляється дефіс. Важлива деталь: перед повернення рядка як рядка заміни над ним слід провести додаткові операції.

Функція заміни приймає своїм аргументом фрагмент, що збігся, і, перед тим, як повернути його, використовує його для зміни регістру і приєднання дефіса.

```js
function styleHyphenFormat(propertyName) {
  function upperToHyphenLower(match, offset, string) {
    return (offset > 0 ? '-' : '') + match.toLowerCase();
  }
  return propertyName.replace(/[A-Z]/g, upperToHyphenLower);
}
```

Для `styleHyphenFormat('borderTop')` це поверне `'border-top'`.

Оскільки в цьому випадку потрібно додатково змінити _знайдений збіг_ перед остаточною заміною, то слід вжити функцію. Це змушує програму спершу знайти збіг, тобто до виконання методу {{jsxref("String.prototype.toLowerCase()", "toLowerCase()")}}. Якщо спробувати зробити заміну без функції, то метод {{jsxref("String.prototype.toLowerCase()", "toLowerCase()")}} не матиме ефекту.

```js example-bad
let newString = propertyName.replace(/[A-Z]/g, '-' + '$&'.toLowerCase());  // так не працює
```

Так відбувається через те, що `'$&'.toLowerCase()` спочатку виконується як операція над рядком (повертаючи в результаті той самий рядок `'$&'`), до того як спеціальне значення цих символів буде використано.

### Заміна градусів за Фаренгейтом їхнім еквівалентом за шкалою Цельсія

Наступний приклад замінює градуси Фаренгейта їхнім еквівалентом в градусах Цельсія. Градуси Фаренгейта позначаються числом із літерою `"F"` в кінці. Функція повертає число градусів Цельсія зі літерою `"C"` в кінці. Наприклад, якщо вхідне число дорівнює `"212F"`, функція поверне `"100C"`. Якщо початкове число — `"0F"` – в результаті повернеться `"-17.77777777777778C"`.

Регулярний вираз `test` шукає будь-яке число, після котрого стоїть літера `F`. Доступ функції до числа градусів по шкалі Фаренгейта здійснюється через її другий аргумент `p1`. Функція встановлює число градусів Цельсія на основі градусів Фаренгейта, переданих рядком до функції `f2c()`. Після цього `f2c()` повертає число градусів Цельсія. Ця функція працює приблизно як прапорець `s///e` в Perl.

```js
function f2c(x) {
  function convert(str, p1, offset, s) {
    return ((p1 - 32) * 5/9) + 'C';
  }
  let s = String(x);
  let test = /(-?\d+(?:\.\d*)?)F\b/g;
  return s.replace(test, convert);
}
```

## Специфікації

{{Specifications}}

## Сумісність із браузерами

{{Compat}}

## Дивіться також

- {{jsxref("String.prototype.replaceAll", "String.prototype.replaceAll()")}}
- {{jsxref("String.prototype.match", "String.prototype.match()")}}
- {{jsxref("RegExp.prototype.exec", "RegExp.prototype.exec()")}}
- {{jsxref("RegExp.prototype.test", "RegExp.prototype.test()")}}
